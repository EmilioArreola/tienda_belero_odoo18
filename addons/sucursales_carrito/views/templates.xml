<?xml version="1.0" encoding="UTF-8"?>
<odoo>

    <!-- 1锔 Herencia del checkout para agregar el selector de sucursal -->
    <template id="mi_checkout_con_sucursales" inherit_id="website_sale.checkout" name="Checkout con selector de sucursal">

        <!-- Agregar selector ANTES de los datos de facturaci贸n -->
        <xpath expr="//t[@t-call='website_sale.billing_address_row']" position="before">

            <div class="mb-4" id="sucursal_picker_wrapper">

                <h4 class="fs-6 small text-uppercase fw-bolder text-primary">
                    <i class="fa fa-map-marker me-2"></i>
                    SELECCIONE LA SUCURSAL DONDE RECOGER SU PEDIDO
                </h4>

                <div class="alert alert-info small mb-3" role="alert">
                    <i class="fa fa-info-circle me-1"></i>
                    Por favor, seleccione la sucursal de su preferencia para recoger su pedido.
                </div>

                <select name="sucursal_recogida_frontend" class="form-select form-select-lg" id="sucursal_select">
                    <option value="">-- Seleccione una sucursal --</option>
                    <option value="escuadron_201"> Escuadr贸n 201 #300, Antiguo Aeropuerto</option>
                    <option value="lazaro_cardenas"> Av. L谩zaro C谩rdenas 503-3, Col. Guelatao</option>
                    <option value="cosijoeza"> Calle Cosijoeza #216-A, Barrio de Jalatlaco</option>
                    <option value="eucaliptos"> Eucaliptos #215B, Col. Reforma</option>
                    <option value="riveras"> Libramiento Riveras del Atoyac #122-2</option>
                    <option value="diaz_ordaz"> D铆az Ordaz #710, Col. Centro</option>
                    <option value="eduardo_mata"> Av. Eduardo Mata #2302, Perif茅rico</option>
                    <option value="cristobal_colon"> Carretera Crist贸bal Col贸n #202, Santa Rosa</option>
                    <option value="yagul"> Calle Yagul esq. Cosijopi #122-A</option>
                    <option value="vicente_guerrero"> Vicente Guerrero, Centro, Oaxaca</option>
                </select>

                <div id="sucursal_error_msg" class="text-danger mt-2 small d-none">
                    <i class="fa fa-exclamation-triangle me-1"></i>
                    Por favor selecciona una sucursal.
                </div>

            </div>

        </xpath>

        <!-- Agregar id personalizado al bot贸n CONTINUAR -->
        <xpath expr="//button[@id='o_payment_submit_button']" position="attributes">
            <attribute name="class">btn btn-primary o_payment_submit_button custom_checkout_button</attribute>
        </xpath>

    </template>

</odoo>
