<?xml version="1.0" encoding="utf-8"?>
<odoo>

    <!-- 1锔 Herencia del checkout (para mostrar el selector de sucursal) -->
    <template id="mi_checkout_con_sucursales" inherit_id="website_sale.checkout">
        <xpath expr="//t[@t-call='website_sale.billing_address_row']" position="before">

            <style>
                /* Estilos para el selector de sucursales */
                #sucursal_select {
                    border: 2px solid #dee2e6;
                    transition: all 0.3s ease;
                }
                #sucursal_select:focus {
                    border-color: #0d6efd;
                    box-shadow: 0 0 0 0.25rem rgba(13, 110, 253, 0.25);
                }
                #sucursal_select.is-invalid {
                    border-color: #dc3545 !important;
                    background-image: none !important;
                }
                #sucursal_select.is-valid {
                    border-color: #198754 !important;
                    background-image: none !important;
                }
                /* Mensaje de error */
                #sucursal_error_msg {
                    color: #dc3545;
                    font-size: 0.875rem;
                    margin-top: 0.5rem;
                }
                #sucursal_error_msg.show {
                    display: block !important;
                }
            </style>

            <div class="mb-4 d-none" id="sucursal_picker_wrapper">

                <h4 class="fs-6 small text-uppercase fw-bolder text-primary">
                    <i class="fa fa-map-marker me-2"></i>
                    SELECCIONE LA SUCURSAL DONDE RECOGER SU PEDIDO
                </h4>

                <div class="alert alert-info small mb-3" role="alert">
                    <i class="fa fa-info-circle me-1"></i>
                    Por favor, seleccione la sucursal de su preferencia para recoger su pedido.
                </div>

                <select name="sucursal_recogida_frontend" class="form-select form-select-lg" id="sucursal_select">
                    <option value="">-- Seleccione una sucursal --</option>
                    <option value="escuadron_201"> Escuadr贸n 201 #300, Antiguo Aereopuerto</option>
                    <option value="lazaro_cardenas"> Av L谩zaro C谩rdenas 503-3, Col. Guelatao, Santa Luc铆a</option>
                    <option value="cosijoeza"> Calle Cosijoeza #216-A, Barrio de Jalatlaco</option>
                    <option value="eucaliptos"> Eucaliptos #215 , Col. Reforma, 68050</option>
                    <option value="riveras"> Libramiento Riveras del Atoyac #122-2</option>
                    <option value="diaz_ordaz"> D铆az Ordaz #710, Col. Centro</option>
                    <option value="eduardo_mata"> Av. Eduardo Mata #2302, Perif茅rico</option>
                    <option value="cristobal_colon"> Carretera Crist贸bal Col贸n #202, Santa Rosa</option>
                    <option value="yagul"> Calle Yagul esq. Cosijopi #122-A</option>
                    <option value="vicente_guerrero"> Vicente Guerrero, Centro, Oaxaca</option>
                </select>

                <div id="sucursal_error_msg" class="text-danger mt-2 small d-none">
                    <i class="fa fa-exclamation-triangle me-1"></i>
                    Por favor selecciona una sucursal.
                </div>

            </div>
        </xpath>
    </template>

    <!-- 2锔 Herencia del bot贸n confirmar 
    <template id="agregar_id_a_boton_confirmar" inherit_id="website_sale.confirm_button">
        <xpath expr="//a[@name='website_sale_main_button']" position="attributes">
            <attribute name="id">boton_confirmar_checkout</attribute>
        </xpath>
    </template> -->

<template id="mi_checkout_con_sucursales" inherit_id="website_sale.checkout">
    <!-- Tu primer xpath con el selector -->
    <xpath expr="//t[@t-call='website_sale.billing_address_row']" position="before">
        <!-- ... (todo tu c贸digo del selector) ... -->
    </xpath>

    <!-- Este xpath agrega el id al bot贸n Confirmar -->
    <xpath expr="//a[@name='website_sale_main_button']" position="attributes">
        <attribute name="id">boton_confirmar_checkout</attribute>
    </xpath>
</template>

</odoo>
